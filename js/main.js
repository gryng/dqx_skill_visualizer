// Generated by CoffeeScript 1.6.1
(function(){var e;e=function(){function e(e){var t=this;this.el=e;this.skillId=e.find("section").attr("data-skill");this.sheet=$(".jobDetail section[data-skill="+this.skillId+"]");this.load();e.find("label").each(function(){var t,n,r;n=$(this).attr("class");r=$(this).find("input[type=number]").val();t=$("<i class='"+n+"' style='width:"+r+"%' data-val='"+r+"'></i>");return e.find(".chart.bar").append(t)});this.el.find("input[type=number]").on("change",function(e){t.overCheck($(e.target));return t.change($(e.target))});this.el.on("click",function(){t.el.addClass("active").siblings("li").removeClass("active");return t.sheet.addClass("active").siblings("section").removeClass("active")})}e.prototype.change=function(e){var t,n;t=e.attr("data-job");n=e.val();this.el.find("i.job"+t).attr("data-val",n).css({width:n+"%"});this.sum=this.getSum();this.el.find("h1").attr("data-sum",this.sum);this.sheetUpdate();return this.save(t)};e.prototype.overCheck=function(e){var t,n,r;r=0;t=0;e.closest("div.input").find("input[type=number]").each(function(){return r+=Number($(this).val())});r>100&&(t=r-100);n=e.val()-t;return e.val(n)};e.prototype.getSum=function(){var e;e=0;this.el.find("label input").each(function(t){return e+=Number($(this).val())});return e};e.prototype.sheetUpdate=function(){var e;e=this.getSum();return this.sheet.find(".skillTable li .point").each(function(){var t;t=Number($(this).text());return t<=e?$(this).closest("li").addClass("get"):$(this).closest("li").removeClass("get")})};e.prototype.save=function(e){var t;t=this.el.find("input[type=number][data-job="+e+"]").val();return localStorage.setItem("dqxskillset?skill="+this.skillId+"?job="+e,t)};e.prototype.load=function(){var e,t,n;for(t=n=1;n<13;t=++n){e=localStorage.getItem("dqxskillset?skill="+this.skillId+"?job="+t);e!=null&&this.el.find("input[type=number][data-job="+t+"]").val(e)}this.sum=this.getSum();this.el.find("h1").attr("data-sum",this.sum);return this.sheetUpdate()};return e}();$(function(){return $(".listSkill > li").each(function(){var t;return t=new e($(this))})})}).call(this);